<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Eindeepseek</title>
  <style>
    body {margin:0;font-family:Arial,Helvetica,sans-serif;background:#0b0c10;color:#e9ecf1;}
    header{position:sticky;top:0;z-index:10;display:flex;align-items:center;justify-content:space-between;padding:14px 18px;background:#121318;color:#fff}
    .brand a{color:#fff;text-decoration:none;font-weight:800;font-size:20px}
    .lang{display:inline-flex;gap:6px;align-items:center}
    .lang button{appearance:none;border:none;cursor:pointer;padding:6px 10px;border-radius:6px;color:#7b8190;background:#1d1e25}
    .lang button.active{color:#fff;background:#2b7de9}
    .wrap{max-width:1100px;margin:0 auto;padding:22px 18px 56px}
    h1{font-size:28px;margin:8px 0 10px}
    p.lead{color:#7b8190;margin-top:0}
    .contactbar{display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin:10px 0 20px}
    .contactbar a,.contactbar span{background:#1d1e25;border:1px solid #333;padding:8px 12px;border-radius:8px;color:#e9ecf1;text-decoration:none;font-size:14px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:18px}
    .card{background:#121318;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.45);overflow:hidden;display:flex;flex-direction:column}
    .thumb{background:#fff;display:flex;align-items:center;justify-content:center}
    .thumb img{max-width:100%;height:auto;display:block}
    .body{padding:14px;display:flex;flex-direction:column;gap:8px;flex:1}
    .title{font-weight:800}
    .desc{color:#aaa;font-size:14px;line-height:1.5}
    .btn{margin-top:auto;align-self:flex-start;background:#2b7de9;color:#fff;padding:8px 12px;border-radius:8px;text-decoration:none;font-weight:600}
    footer{border-top:1px solid #333;text-align:center;padding:16px;color:#7b8190;margin-top:28px}
  </style>
</head>
<body>
  <header>
    <div class="brand"><a href="./">Eindeepseek</a></div>
    <div class="lang" id="langSwitcher">
      <button data-lang="zh">ZH</button>
      <button data-lang="en">EN</button>
      <button data-lang="de">DE</button>
    </div>
  </header>

  <div class="wrap">
    <!-- 联系方式 -->
    <div class="contactbar">
      <a href="mailto:wengandy128@gmail.com">📧 邮件: wengandy128@gmail.com</a>
      <a href="https://wa.me/8615888791812" target="_blank">💬 WhatsApp: +86 15888791812</a>
      <a href="tel:+8615888791812">📞 电话: +86 15888791812</a>
      <span>🟩 微信: 15888791812</span>
    </div>

    <h1 id="heading">产品展示</h1>
    <p class="lead" id="sub">选择语言后会在全站生效；仅显示有内容的产品。</p>

    <div class="grid" id="grid">
      <!-- 产品卡片会通过JS自动加载 -->
    </div>

    <!-- 群组二维码卡片 -->
    <article class="card">
      <div class="thumb"><img src="group.jpeg" alt="WhatsApp Group QR"></div>
      <div class="body">
        <div class="title">加入 WhatsApp 群组</div>
        <div class="desc">扫码二维码，或点击下方按钮直接加入我们的贸易 & 物流交流群。</div>
        <a class="btn" href="https://chat.whatsapp.com/IzsPZY0GJfYAm1yOueXYkb?mode=ac_t" target="_blank">点击加入群组</a>
      </div>
    </article>

  </div>

  <footer>© <span id="y"></span> Eindeepseek</footer>

  <script>
    document.getElementById('y').textContent=new Date().getFullYear();
    const qs=new URLSearchParams(location.search);
    const currentLang=(qs.get('lang')||localStorage.getItem('lang')||'zh').toLowerCase();
    localStorage.setItem('lang',currentLang);
    const langEl=document.getElementById('langSwitcher');
    [...langEl.querySelectorAll('button')].forEach(b=>{
      if(b.dataset.lang===currentLang) b.classList.add('active');
      b.onclick=()=>{const lang=b.dataset.lang;localStorage.setItem('lang',lang);const url=new URL(location.href);url.searchParams.set('lang',lang);location.href=url.toString();};
    });
    async function exists(u){try{const r=await fetch(u,{method:'HEAD',cache:'no-store'});return r.ok;}catch{return false;}}
    async function firstImage(base){const exts=['jpg','jpeg','png','webp'];for(const ext of exts){const u=`${base}/1.${ext}`;if(await exists(u))return u;}return '';}
    async function readPreview(slug){const order=[currentLang,'en','zh','de'];for(const lg of order){const u=`products/${slug}-${lg}.txt`;try{const r=await fetch(u,{cache:'no-store'});if(r.ok){const tx=(await r.text()).trim();const [first,...rest]=tx.split(/\\r?\\n/);return {title:first?.trim()||null,desc:rest.join('\\n').trim()||null,lang:lg};}}catch{}}return null;}
    async function buildGrid(){const grid=document.getElementById('grid');for(let i=1;i<=6;i++){const slug=`product-${i}`;const imgBase=`assets/imgs/${slug}`;const img=await firstImage(imgBase);const preview=await readPreview(slug);if(!img&&!preview)continue;const title=preview?.title||`Product ${i}`;const desc=preview?.desc||'';const card=document.createElement('div');card.className='card';const a=document.createElement('a');const href=new URL(`products/${slug}.html`,location.origin+location.pathname);href.searchParams.set('lang',currentLang);a.href=href.toString();card.innerHTML=`${img?`<img class="thumb" src="${img}" alt="${title}">`:`<div class="thumb" style="aspect-ratio:4/3;background:#222"></div>`}<div class="body"><div class="title">${title}</div><p class="desc">${desc}</p></div>`;card.appendChild(a);grid.appendChild(card);}}
    buildGrid();
  </script>
</body>
</html>
