
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Eindeepseek · 产品精选</title>

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SP9BZHN30E"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-SP9BZHN30E');
  </script>

  <meta name="description" content="Eindeepseek B2C 产品展示，支持中文/英文/德文，多语言切换；极速首屏。" />
  <link rel="dns-prefetch" href="//www.eindeepseek.com">
  <link rel="preconnect" href="https://www.eindeepseek.com" crossorigin>

  <style>
    :root{
      --bg:#f7f8fa; --text:#1c1d1f; --muted:#5b606a; --primary:#2b7de9;
      --card:#fff; --border:#e5e7eb; --ring:rgba(43,125,233,.15);
      --skeleton:#eef1f5; --skeleton-shimmer:#f7f8fb;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--text)}
    header{position:sticky;top:0;z-index:10;display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:#fff;border-bottom:1px solid var(--border)}
    .brand a{color:var(--text);text-decoration:none;font-weight:800;letter-spacing:.3px}
    .lang{display:inline-flex;gap:6px;align-items:center;background:#fff;border:1px solid var(--border);border-radius:999px;padding:6px}
    .lang button{appearance:none;border:none;cursor:pointer;padding:6px 10px;border-radius:999px;color:var(--muted);background:transparent;font-weight:600}
    .lang button.active{color:#fff;background:var(--primary);box-shadow:0 0 0 6px var(--ring) inset}

    .wrap{max-width:1200px;margin:0 auto;padding:18px 16px 56px}
    h1{font-size:28px;margin:10px 0 8px}
    p.lead{color:var(--muted);margin:0 0 10px}

    .grid{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:24px}
    @media(min-width:640px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media(min-width:960px){.grid{grid-template-columns:repeat(3,1fr)}}
    .card{position:relative;overflow:hidden;border-radius:14px;background:var(--card);border:1px solid var(--border);box-shadow:0 2px 10px rgba(0,0,0,.06);transform:translateY(6px);opacity:0;animation:rise .45s ease forwards;transition:transform .18s ease, box-shadow .18s ease}
    .card:hover{transform:translateY(-2px); box-shadow:0 6px 20px rgba(0,0,0,.12)}
    @keyframes rise{to{transform:none;opacity:1}}
    .thumb{aspect-ratio:4/3;width:100%;display:block;object-fit:cover;background:#f1f3f5}
    .body{padding:12px 14px 16px}
    .title{font-weight:800;margin:2px 0 6px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#111}
    .desc{color:var(--muted);margin:0;line-height:1.55;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
    .badge{position:absolute;top:10px;left:10px;background:#111;color:#fff;padding:2px 8px;border-radius:999px;font-size:12px;opacity:.85}
    .cardlink{display:block;text-decoration:none;color:inherit}

    .skeleton{position:relative;overflow:hidden;background:var(--skeleton)}
    .skeleton::after{content:"";position:absolute;inset:0;transform:translateX(-100%);background:linear-gradient(90deg, transparent, var(--skeleton-shimmer), transparent);animation:shimmer 1.2s infinite}
    @keyframes shimmer{100%{transform:translateX(100%)}}

    footer{border-top:1px solid var(--border);text-align:center;padding:14px;color:var(--muted);margin-top:26px}
  </style>
</head>
<body>
  <header>
    <div class="brand"><a href="./">Eindeepseek</a></div>
    <div class="lang" id="langSwitcher">
      <button data-lang="zh">ZH</button>
      <button data-lang="en">EN</button>
      <button data-lang="de">DE</button>
    </div>
  </header>

  <div class="wrap">
    <h1 id="heading">产品展示</h1>
    <p class="lead" id="sub">选择语言后会在全站生效；仅显示有内容的产品。</p>

    <div class="grid" id="grid">
      <div class="card"><div class="thumb skeleton"></div><div class="body"><div class="title skeleton" style="height:18px;width:60%"></div><p class="desc skeleton" style="height:38px"></p></div></div>
      <div class="card"><div class="thumb skeleton"></div><div class="body"><div class="title skeleton" style="height:18px;width:60%"></div><p class="desc skeleton" style="height:38px"></p></div></div>
      <div class="card"><div class="thumb skeleton"></div><div class="body"><div class="title skeleton" style="height:18px;width:60%"></div><p class="desc skeleton" style="height:38px"></p></div></div>
    </div>
  </div>

  <footer>© <span id="y"></span> Eindeepseek</footer>

  <script>
    const I18N={
      zh:{title:'产品展示',sub:'选择语言后会在全站生效；仅显示有内容的产品。'},
      en:{title:'Products',sub:'Language selection applies site-wide. Only products with content are shown.'},
      de:{title:'Produkte',sub:'Die Sprachauswahl gilt für die ganze Seite. Es werden nur Produkte mit Inhalt angezeigt.'}
    };

    const qs=new URLSearchParams(location.search);
    const currentLang=(qs.get('lang')||localStorage.getItem('lang')||'zh').toLowerCase();
    localStorage.setItem('lang',currentLang);
    const t=I18N[currentLang]||I18N.zh;
    document.getElementById('heading').textContent=t.title;
    document.getElementById('sub').textContent=t.sub;
    document.getElementById('y').textContent=new Date().getFullYear();

    [...document.querySelectorAll('#langSwitcher button')].forEach(b=>{
      if(b.dataset.lang===currentLang) b.classList.add('active');
      b.onclick=()=>{const lang=b.dataset.lang;localStorage.setItem('lang',lang);const url=new URL(location.href);url.searchParams.set('lang',lang);location.href=url.toString();};
    });

    function fetchWithTimeout(url,ms=1200){const ctl=new AbortController();const id=setTimeout(()=>ctl.abort(),ms);return fetch(url,{cache:'no-store',signal:ctl.signal}).finally(()=>clearTimeout(id));}
    async function jsonFast(url){try{const r=await fetchWithTimeout(url,1500);if(r.ok)return await r.json();}catch{}return null;}

    (async function build(){
      const mf=await jsonFast('products/manifest.json'); // <-- manifest moved under /products
      const lang=currentLang;
      const grid=document.getElementById('grid'); grid.innerHTML='';
      if(!mf?.items) return;
      mf.items.forEach((it)=>{
        const slug=`products/${it.id}.html`; // detail page
        const title=(it.title?.[lang]||it.title?.zh||('Product '+it.id));
        const hero=`assets/imgs/product-__ID__/1.__EXT__`.replace('__ID__',it.id).replace('__EXT__',it.imgExt||'jpg');
        const a=document.createElement('a');
        a.className='cardlink';
        const url=new URL(slug, location.href);
        url.searchParams.set('lang',lang);
        a.href=url.toString();
        a.onclick=()=>{ try{ sessionStorage.setItem('heroSrc-'+it.id, hero); gtag('event','click_product',{product_id:it.id,product_name:title}); }catch(e){} };
        a.innerHTML=`
          <article class="card">
            <img class="thumb" src="${hero}" alt="${title}" loading="eager" decoding="async" fetchpriority="high">
            <div class="body"><div class="title">${title}</div><p class="desc">${it.subtitle?.[lang]||''}</p></div>
          </article>`;
        grid.appendChild(a);
      });
    })();
  </script>
</body>
</html>
